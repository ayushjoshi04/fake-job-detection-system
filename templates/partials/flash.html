{%- with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-container">
      {% for category, message in messages %}
        <div class="flash-message {{ category }}">
          <span>{{ message }}</span>
          <button class="close-btn" onclick="this.parentElement.remove()">Ã—</button>
        </div>
      {% endfor %}
    </div>

    <style>
      .flash-container {
        position: fixed;
        top: 80px;
        right: 20px;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        gap: 10px;
        animation: fadeIn 0.4s ease;
      }

      .flash-message {
        padding: 12px 18px;
        border-radius: 10px;
        font-weight: 500;
        font-size: 15px;
        color: #fff;
        box-shadow: 0 0 10px rgba(0,0,0,0.2);
        backdrop-filter: blur(10px);
        min-width: 260px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        animation: slideIn 0.3s ease;
      }

      .flash-message.success { background: rgba(0, 255, 128, 0.2); border: 1px solid #00ff80; color: #00ff80; }
      .flash-message.error, .flash-message.danger { background: rgba(255, 60, 60, 0.2); border: 1px solid #ff4040; color: #ff4040; }
      .flash-message.warning { background: rgba(255, 200, 0, 0.2); border: 1px solid #ffcc00; color: #ffcc00; }
      .flash-message.info { background: rgba(0, 180, 255, 0.2); border: 1px solid #00b4ff; color: #00b4ff; }

      .flash-message .close-btn {
        background: none;
        border: none;
        color: inherit;
        font-size: 18px;
        cursor: pointer;
        margin-left: 10px;
      }

      @keyframes slideIn {
        from { opacity: 0; transform: translateX(50px); }
        to { opacity: 1; transform: translateX(0); }
      }

      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
    </style>

    <script>
      // Auto-hide after 4 seconds
      setTimeout(() => {
        document.querySelectorAll('.flash-message').forEach(el => el.remove());
      }, 4000);
    </script>
  {% endif %}
{%- endwith %}
